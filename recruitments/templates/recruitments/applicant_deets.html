{% extends 'base.html' %}

{% block content %}
{% if user.is_authenticated %}
    <h1 class="center-align">You are already in the club!</h1>
{% else %}

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<div class="row center">
    <div class="col l6 offset-l3 m6">
        <div class="card">
            <div class="card-content black-text">
                <center>
                    <span class="card-title">Applicant Details</span>
                </center>
                <form method="POST">{% csrf_token %}
                    <div class="row">
                        <div class="col s12">
                            <div class="row">
                                <div class="input-field col s6">
                                    <i class="form-icon material-icons prefix">person</i>
                                    {{form.first_name}}
                                    <label for="id_first_name">First Name</label>
                                </div>
                                <div class="input-field col s6">
                                    {{form.last_name}}
                                    <label for="id_last_name">Last Name</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <i class="form-icon material-icons prefix">fingerprint</i>
                                    {{form.rollno}}
                                    <label for="id_rollno">Roll Number</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <i class="form-icon material-icons prefix">phone</i>
                                    {{form.phone}}
                                    <label for="id_phone">Mobile Number</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <i class="form-icon material-icons prefix">email</i>
                                    {{form.email}}
                                    <label for="id_email">Email Address</label>
                                    <span class="helper-text">An application progress tracker will be sent to this email</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    {{form.year}}
                                    <label for="id_year">Year</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    {{form.sig_choices}}
                                    <label for="id_sig_choices">Pick SIGs to apply for</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn waves-effect waves-light" type="submit" name="action">Submit
                        <i class="material-icons right">send</i>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="row">
{% for sig_choice in form.sigs %}
<div class="col s12 l4">
    <div class="card">
        <div class="card-image waves-effect waves-block waves-light">
            <img class="activator" src="/media/{{sig_choice.avatar}}">
        </div>
        <div class="card-content">
            <span class="card-title activator grey-text text-darken-4">{{sig_choice.name}}<i class="material-icons right">more_vert</i></span>
        </div>
        <div class="card-reveal">
            <span class="card-title grey-text text-darken-4">{{sig_choice.name}}<i class="material-icons right">close</i></span>
            <p>{{sig_choice.description|safe}}</p>
        </div>
    </div>
</div>
{% endfor %}

</div>
{% if form.errors %}
    {% for field in form %}
        {% for error in field.errors %}
            <p> {{ error }} </p>
        {% endfor %}
    {% endfor %}
{% endif %}

{% endif %}
{% endblock %}
